{% extends 'base_en.html' %}
{% block content %}
    <div id="rootDiv">
        <div id="calculatorSwitchMenu">
            <div id="oneRepMaxTestMenuDiv">
                {% load static %}
                <img src="{% static 'oneRepMaxTestBg.png' %}" alt="oneRepMaxTest">
                <div>
                    <span>Deltoid One Rep Max Test</span>
                    <hr>
                    <div>
                        <a id="oneRepMaxTestMenuButton">Test</a>
                        <a id="mid_ruler"></a>
                        <a id="oneRepMaxResultMenuButton">Result</a>
                    </div>
                </div>
            </div>
            <a id="gripStrengthTestMenuButton" class="menuBlackButton">Grip Strength Test</a>
            <a id="twelveMinRunTestMenuButton" class="menuBlackButton">12min Run Test</a>
            <hr>
            <a id="oneRepMaxMenuButton" class="menuButton">One Rep Max Calculator</a>
            <a id="plateBarbelMenuButton" class="menuButton">Plate Barbell Calculator</a>
            <a id="wilksMenuButton" class="menuButton">Wilks Calculator</a>
        </div>
        <div id="goBackMenuDiv" style="display: none;">
            <a id="goBackMenuButton"></a>
        </div>
        <div id="calculatorsDiv">
            <div class="calculatorDiv" id="calculatorSwitchTabs">
                <label id="oneRepMaxButton" class="checked">One Rep Max Calculator<input type="radio" name="calc"></label>
                <label id="plateBarbelButton" class="unchecked">Plate Barbell Calculator<input type="radio" name="calc"></label>
                <label id="wilksButton" class="unchecked">Wilks Calculator<input type="radio" name="calc"></label>
            </div>
            <div class="calculatorDiv" id="oneRepMaxTestDiv">
                <h3 style="font-weight: bold;">Deltoid One Rep Max Test</h3>
                <div class="calculatorContentRoot">
                    <span style="display: block; margin-bottom: 12px; font-size: smaller;">Essential information</span>

                    <label for="name" style="display: block; padding-top: 12px;">Name</label>
                    <input style="display: block; width: 100%" type="text" id="name" name="name" placeholder="e.g. 송길동">

                    <label for="gender" style="display: block; padding-top: 12px;">Gender</label>
                    <div>
                        <label style="cursor: pointer">
                            <input type="radio" name="oneRmGender" value="male" checked>
                            Male
                        </label>
                        <label style="cursor: pointer">
                            <input type="radio" name="oneRmGender" value="female">
                            Female
                        </label>
                    </div>

                    <label for="age" style="display: block; padding-top: 12px;">Age</label>
                    <div style="display: flex; justify-content: space-between">
                        <input style="flex-grow: 1;" type="number" min="1" max="120" step="1" id="age" name="age" placeholder="e.g. 25">
                        <span>y.o.</span>
                    </div>

                    <label for="height" style="display: block; padding-top: 12px;">Height</label>
                    <div style="display: flex; justify-content: space-between">
                        <input style="flex-grow: 1;" type="number" id="height" name="height" placeholder="e.g. 90">
                        <span>cm</span>
                    </div>

                    <label for="weight" style="display: block; padding-top: 12px;">Weight</label>
                    <div style="display: flex; justify-content: space-between">
                        <input style="flex-grow: 1;" type="number" id="weight" name="weight" placeholder="e.g. 35">
                        <span>kg</span>
                    </div>

                    <span style="display: block; margin-top: 8px; font-size: x-small;">*If you don't write down your physical information directly, recent information will be automatically entered.</span>
                </div>
                <div class="calculatorExtraContentRoot">
                    <div class="calculatorSubItemDiv">
                        <div class="bodyPartVisualDiv">
                            <a style="position: absolute; top: 10px; z-index: 0" class="bodyPartHighlightCircle"></a>
                            <img style="z-index: 1; padding-left: 16px; padding-top: 10px;" src="{% static 'shoulder.svg' %}" alt="shoulder" width="80px" height="80px">
                        </div>
                        <div class="bodyPartInputsDiv">
                            <span style="display: block; font-size: medium;">Shoulder<span style="font-size: small">(Dumbbell Lateral Raise)</span></span>
                            <div>
                                <label>
                                    Weight(kg)
                                    <input class="skip" name="shoulderWeight" required type="number" min="0" max="999" maxlength="3" value="0" placeholder="0">
                                </label>

                                <label>
                                    Number
                                    <input class="skip" name="shoulderCount" required type="number" min="0" max="999" maxlength="3" value="0" placeholder="0">
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="calculatorSubItemDiv">
                        <div class="bodyPartVisualDiv">
                            <a style="position: absolute; top: 0; z-index: 0" class="bodyPartHighlightCircle"></a>
                            <img style="z-index: 1" src="{% static 'body.svg' %}" alt="chest" width="96px" height="96px">
                        </div>
                        <div class="bodyPartInputsDiv">
                            <span style="display: block; font-size: medium;">Chest<span style="font-size: small">(Push up)</span></span>
                            <div>
                                <label>
                                    Weight(kg)
                                    <input class="skip" name="chestWeight" required type="number" min="0" max="999" maxlength="3" value="0" placeholder="0">
                                </label>

                                <label>
                                    Number
                                    <input class="skip" name="chestCount" required type="number" min="0" max="999" maxlength="3" value="0" placeholder="0">
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="calculatorSubItemDiv">
                        <div class="bodyPartVisualDiv">
                            <a style="position: absolute; top: 28px; z-index: 0" class="bodyPartHighlightCircle"></a>
                            <img style="z-index: 1; padding: 3px" src="{% static 'back.svg' %}" alt="back" width="80px" height="80px">
                        </div>
                        <div class="bodyPartInputsDiv">
                            <span style="display: block; font-size: medium;">Back<span style="font-size: small">(Dumbbell Raw)</span></span>
                            <div>
                                <label>
                                    Weight(kg)
                                    <input class="skip" name="backWeight" required type="number" min="0" max="999" maxlength="3" value="0" placeholder="0">
                                </label>

                                <label>
                                    Number
                                    <input class="skip" name="backCount" required type="number" min="0" max="999" maxlength="3" value="0" placeholder="0">
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="calculatorSubItemDiv">
                        <div class="bodyPartVisualDiv">
                            <a style="position: absolute; top: 22px; z-index: 0" class="bodyPartHighlightCircle"></a>
                            <img style="z-index: 1; padding: 3px" src="{% static 'abs.svg' %}" alt="abs" width="80px" height="80px">
                        </div>
                        <div class="bodyPartInputsDiv">
                            <span style="display: block; font-size: medium;">Abs<span style="font-size: small">(Crunch)</span></span>
                            <div>
                                <label>
                                    Weight(kg)
                                    <input class="skip" name="absWeight" required type="number" min="0" max="999" maxlength="3" value="0" placeholder="0">
                                </label>

                                <label>
                                    Number
                                    <input class="skip" name="absCount" required type="number" min="0" max="999" maxlength="3" value="0" placeholder="0">
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="calculatorSubItemDiv">
                        <div class="bodyPartVisualDiv">
                            <a style="position: absolute; top: 22px; z-index: 0" class="bodyPartHighlightCircle"></a>
                            <img style="z-index: 1;" src="{% static 'legs.svg' %}" alt="legs" width="96px" height="96px">
                        </div>
                        <div class="bodyPartInputsDiv">
                            <span style="display: block; font-size: medium;">Legs<span style="font-size: small">(Dumbbell Squat)</span></span>
                            <div>
                                <label>
                                    Weight(kg)
                                    <input class="skip" name="legsWeight" required type="number" min="0" max="999" maxlength="3" value="0" placeholder="0">
                                </label>

                                <label>
                                    Number
                                    <input class="skip" name="legsCount" required type="number" min="0" max="999" maxlength="3" value="0" placeholder="0">
                                </label>
                            </div>
                        </div>
                    </div>

                    <input class="skip" type="submit" value="Result">
                </div>
            </div>
            <div class="calculatorDiv" id="oneRepMaxResultDiv">
                <h3 style="font-weight: bold;">Deltoid One Rep Max Result</h3>
                <div class="calculatorContentRoot" style="display: flex">
                    <div style="display: inline-block; flex-grow: 1">
                        <div class="_1rmResultInfoDiv">
                            <span>Name</span>
                            <span>|</span>
                            <span class="_1rmResultName"></span>
                        </div>
                        <div class="_1rmResultInfoDiv">
                            <span>Gender</span>
                            <span>|</span>
                            <span id="_1rmResultGender"></span>
                        </div>
                        <div class="_1rmResultInfoDiv">
                            <span>Age</span>
                            <span>|</span>
                            <span id="_1rmResultAge"></span>
                        </div>
                    </div>
                    <div style="display: inline-block; flex-grow: 1">
                        <div class="_1rmResultInfoDiv">
                            <span>Height</span>
                            <span>|</span>
                            <span id="_1rmResultHeight"></span>
                        </div>
                        <div class="_1rmResultInfoDiv">
                            <span>Weight</span>
                            <span>|</span>
                            <span id="_1rmResultWeight"></span>
                        </div>
                    </div>
                </div>
                <div class="calculatorExtraContentRoot">
                    <div style="text-align: center; padding: 32px 0">
                        <span style="font-size: large; border-bottom: 2px solid black; text-align: center;"><span class="_1rmResultName"></span>'s score</span>
                    </div>

                    <div id="radarChartRootDiv">
                        <div id="radarChartDiv">
                            <canvas id="radarChart"></canvas>
                        </div>
                    </div>

                    <div style="margin-top: 24px;">
                        <span style="display: block; text-align: center"><span class="_1rmResultName"></span>'s 1RM average is <span style="font-weight: bold; font-style: italic" id="_1rmResultAvgScore"></span><span style="font-weight: bold; font-style: italic">del</span></span>
                        <span style="display: block; text-align: center"><span class="_1rmResultName"></span>'s cumulative 1RM is <span style="font-weight: bold; font-style: italic" id="_1rmResultTotalScore"></span><span style="font-weight: bold; font-style: italic">del</span></span>
                    </div>

                    <div style="margin-top: 32px">
                        <span style="display: block; font-size: x-small; color: #959595">*DEL : The unit used for 1RM test.</span>
                    </div>

                    <hr style="border-bottom: 0.5px solid #AAAAAA">

                    <div class="resultSubItemDiv">
                        <div class="bodyPartVisualDiv">
                            <a style="position: absolute; top: 10px; z-index: 0" class="bodyPartHighlightCircle"></a>
                            <img style="z-index: 1; padding-left: 16px; padding-top: 10px;" src="{% static 'shoulder.svg' %}" alt="shoulder" width="80px" height="80px">
                        </div>
                        <span style="font-size: large;">Shoulder<br><span style="font-size: medium">(Dumbbell Lateral Raise)</span></span>
                        <span id="shoulderResult" style="font-size: xxx-large; font-style: italic; font-weight: bold; color: #6633CC">del</span>
                    </div>

                    <hr style="border-bottom: 0.5px solid #AAAAAA">

                    <div class="resultSubItemDiv">
                        <div class="bodyPartVisualDiv">
                            <a style="position: absolute; top: 0; z-index: 0" class="bodyPartHighlightCircle"></a>
                            <img style="z-index: 1" src="{% static 'body.svg' %}" alt="chest" width="96px" height="96px">
                        </div>
                        <span style="font-size: large;">Chest (Push Up)</span>
                        <span id="chestResult" style="font-size: xxx-large; font-style: italic; font-weight: bold; color: #6633CC">del</span>
                    </div>

                    <hr style="border-bottom: 0.5px solid #AAAAAA">

                    <div class="resultSubItemDiv">
                        <div class="bodyPartVisualDiv">
                            <a style="position: absolute; top: 28px; z-index: 0" class="bodyPartHighlightCircle"></a>
                            <img style="z-index: 1; padding: 3px" src="{% static 'back.svg' %}" alt="back" width="80px" height="80px">
                        </div>
                        <span style="font-size: large;">Back<br>(Dumbbell Row)</span>
                        <span id="backResult" style="font-size: xxx-large; font-style: italic; font-weight: bold; color: #6633CC">del</span>
                    </div>

                    <hr style="border-bottom: 0.5px solid #AAAAAA">

                    <div class="resultSubItemDiv">
                        <div class="bodyPartVisualDiv">
                            <a style="position: absolute; top: 22px; z-index: 0" class="bodyPartHighlightCircle"></a>
                            <img style="z-index: 1; padding: 3px" src="{% static 'abs.svg' %}" alt="abs" width="80px" height="80px">
                        </div>
                        <span style="font-size: large;">Abs (Crunch)</span>
                        <span id="absResult" style="font-size: xxx-large; font-style: italic; font-weight: bold; color: #6633CC">del</span>
                    </div>

                    <hr style="border-bottom: 0.5px solid #AAAAAA">

                    <div class="resultSubItemDiv">
                        <div class="bodyPartVisualDiv">
                            <a style="position: absolute; top: 22px; z-index: 0" class="bodyPartHighlightCircle"></a>
                            <img style="z-index: 1;" src="{% static 'legs.svg' %}" alt="legs" width="96px" height="96px">
                        </div>
                        <span style="font-size: large;">Legs<br>(Dummbell Squat)</span>
                        <span id="legsResult" style="font-size: xxx-large; font-style: italic; font-weight: bold; color: #6633CC">del</span>
                    </div>

                    <hr style="border-bottom: 0.5px solid #AAAAAA">

                    <div style="text-align: center; padding: 32px 0; margin: 0 32px;">
                        <span style="font-size: large; border-bottom: 2px solid black; text-align: center;"><span class="_1rmResultName"></span>'s cumulative score.</span>
                    </div>

                    <div id="barChartRootDiv">
                        <div id="barChartDiv">
                            <canvas id="barChart"></canvas>
                        </div>
                    </div>

                    <div id="_1RMResultActionButtons">
                        <div>
                            <a id="printButton" class="lightButton">Print</a>
                            <a id="photoCardButton" class="lightButton">Photo card</a>
                            <div>
                                <a id="uploadButton" class="lightButton skip"><img src="{% static 'upload.svg' %}" alt="upload" width="20px" height="20px"></a>
                                <span style="width: 4px"></span>
                                <a id="returnButton" class="darkButton skip"> <img src="{% static 'return.svg' %}" alt="return" width="18px" height="18px"> Return</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="calculatorDiv" id="gripStrengthTestDiv">
                <h3 style="font-weight: bold;">Grip Strength Test</h3>
                <div class="calculatorContentRoot">
                    <span>Under Construction</span>
                </div>
            </div>
            <div class="calculatorDiv" id="twelveMinRunTestDiv">
                <h3 style="font-weight: bold;">Grip Strength Test</h3>
                <div class="calculatorContentRoot">
                    <span>Under Construction</span>
                </div>
            </div>
            <div class="calculatorDiv" id="oneRepMaxDiv">
                <h3 style="font-weight: bold;">One Rep Max Calculator</h3>
                <span>Calculate the one repetition maximum weight for all lifts.</span>
                <div class="calculatorContentRoot">
                    <div id="oneRepMaxCalculatorContent">
                        <label for="liftMass">Weight (KG)</label>
                        <input type="number" id="liftMass" name="liftMass" min="1" max="1500" step="0.1" placeholder="Type here">

                        <label for="repetitions">Repetitions</label>
                        <input type="number" name="repetitions" id="repetitions" min="1" max="500" placeholder="Type here">

                        <input type="submit" value="CALCULATE">
                    </div>
                    <div id="oneRepMaxCalculatorResult">
                        <span>Your 1RM is</span>
                        <div>
                            <span id="oneRepMaxResult"></span>
                            <span> kg</span>
                        </div>
                        <span></span>
                    </div>
                </div>
                <table id="oneRepMaxCalculatorResultDetailed" style="display: none">
                    <tr>
                        <th colspan="2">1RM lift weight percentage</th>
                        <th>1RM repetitions</th>
                    </tr>
                </table>
            </div>
            <div class="calculatorDiv" id="plateBarbellRackingDiv" style="display: none">
                <h3 style="font-weight: bold;">Plate Barbell Calculator</h3>
                <span>Compute combination of plates for a specific weight.</span>
                <div class="calculatorContentRoot">
                    <div id="plateBarbellRackingCalculatorContent">
                        <label for="totalLiftMass">Total Lift (KG)</label>
                        <input type="number" id="totalLiftMass" name="totalLiftMass" min="1" max="1500" step="0.1" placeholder="Type here">

                        <label for="barWeight">Bar Weight (KG)</label>
                        <input type="number" id="barWeight" name="barWeight" min="1" max="1500" step="0.1" placeholder="Type here">

                        <input type="submit" value="CALCULATE">
                    </div>
                    <div id="plateBarbellRackingCalculatorResult"></div>
                </div>
            </div>
            <div class="calculatorDiv" id="wilksDiv" style="display: none">
                <h3 style="font-weight: bold;">Wilks Score Calculator</h3>
                <span>Calculate Wilks Score.</span>
                <div class="calculatorContentRoot">
                    <div id="wilksCalculatorContent">
                        <label>Gender : </label>
                        <br>
                        <label style="cursor: pointer">
                            <input type="radio" name="gender" value="male" checked>
                            Male
                        </label>
                        <label style="cursor: pointer">
                            <input type="radio" name="gender" value="female">
                            Female
                        </label>

                        <hr style="margin: 18px 0; border: none">
                        <label for="bodyWeight">Body Weight (KG)</label>
                        <input type="number" id="bodyWeight" name="bodyWeight" min="1" max="1500" step="0.1" placeholder="Type here">

                        <hr style="margin: 18px 0; border: none">
                        <div style="border: 1px solid white; border-radius: 8px; padding: 12px;">
                            <label for="benchLiftMass">Bench Lift Mass (KG)</label>
                            <input type="number" id="benchLiftMass" name="benchLiftMass" min="1" max="1500" step="0.1" placeholder="Type here">
                            <label for="benchRepetitions">Bench Repetitions</label>
                            <input type="number" name="benchRepetitions" id="benchRepetitions" min="1" max="500" placeholder="Type here">
                        </div>

                        <hr style="margin: 18px 0; border: none">
                        <div style="border: 1px solid white; border-radius: 8px; padding: 12px;">
                            <label for="squatMass">Squat Mass (KG)</label>
                            <input type="number" id="squatMass" name="squatMass" min="1" max="1500" step="0.1" placeholder="Type here">
                            <label for="squatRepetitions">Squat Repetitions</label>
                            <input type="number" name="squatRepetitions" id="squatRepetitions" min="1" max="500" placeholder="Type here">
                        </div>

                        <hr style="margin: 18px 0; border: none">
                        <div style="border: 1px solid white; border-radius: 8px; padding: 12px;">
                            <label for="deadliftMass">Deadlift Mass (KG)</label>
                            <input type="number" id="deadliftMass" name="deadliftMass" min="1" max="1500" step="0.1" placeholder="Type here">
                            <label for="deadliftRepetitions">Deadlift Repetitions</label>
                            <input type="number" name="deadliftRepetitions" id="deadliftRepetitions" min="1" max="500" placeholder="Type here">
                        </div>

                        <input type="submit" value="CALCULATE">
                    </div>
                    <div id="wilksCalculatorResult">
                        <span id="wilksScoreResultTitle">Your Wilks Score is:</span> <br>
                        <span id="wilksScoreResult"></span>
                    </div>
                </div>
            </div>
        </div>
        <div id="calculatorInfoRootDiv">
            <div id="calculatorInfoDiv" class="sub_content">
                <span>One Rep Max (1RM)</span>
                <span>This is the maximum weight that one person can lift per repetition.</span>
            </div>
        </div>
    </div>

    <style>
        @media (min-width: 801px) {
            #rootDiv {
                margin: 0;
                padding: 0;
                display: flex;
                justify-content: space-between;
            }

            #calculatorsDiv {
                width: calc(65% - 10px);
                min-height: 200px;
                margin: 0;
                padding: 24px;
                border-radius: 24px;
            }

            #calculatorInfoRootDiv {
                width: calc(35% - 10px);
                margin: 0;
                padding: 0;
                display: inline-block;
            }

            #calculatorSwitchTabs {
                display: flex;
                justify-content: space-between;
                margin-bottom: 32px;
            }

            #calculatorSwitchTabs label {
                font-weight: bold;
                cursor: pointer;
                flex-grow: 1;
                text-align: center;
            }

            #calculatorSwitchTabs input[type=radio] {
                -webkit-appearance: none;
                -moz-appearance: none;
                appearance: none;
            }

            #wilksCalculatorContent label:not(ignore) {
                font-weight: bold;
                cursor: pointer;
                flex-grow: 1;
                text-align: center;
            }

            #calculatorSwitchMenu {
                display: none;
            }

            .calculatorContentRoot {
                display: flex;
                margin: 32px 0;
                padding: 32px;
            }

            #oneRepMaxCalculatorContent, #oneRepMaxCalculatorResult, #plateBarbellRackingCalculatorContent, #plateBarbellRackingCalculatorResult {
                display: inline-block;
                flex-grow: 1;
            }

            #oneRepMaxCalculatorResult, #plateBarbellRackingCalculatorResult {
                width: 70%;
                margin: 0;
                padding: 32px;
            }

            #oneRepMaxCalculatorResultDetailed tr td, #oneRepMaxCalculatorResultDetailed tr th {
                padding-right: 56px;
            }

            .liftPlates {
                background-color: white;
                border-radius: 12px;
                color: black;
                display: inline-block;
                padding: 12px 24px;
                margin: 8px;
            }

            #wilksCalculatorContent {
                display: block;
                width: 40%;
            }

            #wilksCalculatorResult {
                display: block;
                width: 60%;
                text-align: center;
            }

            #wilksScoreResultTitle {
                font-size: x-large;
                margin: 0 auto;
            }

            #wilksScoreResult {
                font-size: xx-large;
                border-bottom: 2px solid lightgray;
                margin: 0 auto;
            }

            #oneRepMaxTestDiv, #oneRepMaxResultDiv, #gripStrengthTestDiv, #twelveMinRunTestDiv {
                display: none;
            }
        }

        @media (max-width: 800px) {
            .w3-main {
                padding: 6px;
            }

            #calculatorsDiv {
                padding: 10px;
            }

            #calculatorsDiv, #calculatorInfoRootDiv, #calculatorSwitchTabs, #calculatorInfoDiv {
                display: none;
            }

            #calculatorSwitchMenu {
                display: block;
                padding-top: 1px;
            }

            #calculatorSwitchMenu hr {
                border: 0.5px solid #5F36C4;
                margin-top: 36px;
                margin-left: 12px;
                margin-right: 12px;
            }

            #goBackMenuDiv {
                padding-top: 4px;
                padding-bottom: 12px;
            }

            #goBackMenuButton {
                width: 12px;
                height: 12px;
                cursor: pointer;
                border: solid black;
                border-width: 0 2px 2px 0;
                display: block;
                transform: rotate(135deg);
                -webkit-transform: rotate(135deg);

                padding: 0;
                margin: 0 8px 0;
                line-height: 1;
            }

            .menuButton {
                display: block;
                padding: 18px;
                background-color: #5F36C4;
                border-radius: 14px;
                margin-top: 24px;
                color: white;
                cursor: pointer;
                font-weight: bold;
            }

            .menuBlackButton {
                display: block;
                padding: 18px;
                background-color: black;
                border-radius: 14px;
                margin-top: 24px;
                color: white;
                cursor: pointer;
                font-weight: bold;
            }

            .calculatorContentRoot {
                display: block;
                margin: 10px 0;
                padding: 12px;
            }

            #oneRepMaxCalculatorContent, #oneRepMaxCalculatorResult, #plateBarbellRackingCalculatorContent, #plateBarbellRackingCalculatorResult {
                display: block;
            }

            .liftPlates {
                background-color: white;
                border-radius: 12px;
                color: black;
                display: inline-block;
                padding: 12px 24px;
                margin: 8px;
            }

            #wilksCalculatorResult {
                display: block;
                text-align: center;
                padding: 0 24px;
            }

            #wilksScoreResultTitle {
                font-size: large;
                margin: 0 auto;
            }

            #wilksScoreResult {
                font-size: x-large;
                border-bottom: 2px solid lightgray;
                margin: 0 auto;
            }

            #oneRepMaxTestMenuDiv {
                height: 240px;
                position: relative;
            }

            #oneRepMaxTestMenuDiv img {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                object-fit: cover;
                border-radius: 14px;
            }

            #oneRepMaxTestMenuDiv div {
                padding: 24px;
                position: absolute;
                bottom: 0;
                left: 0;
                width: 100%;
            }

            #oneRepMaxTestMenuDiv div hr {
                border: 0.5px solid white;
                margin: 12px 0 36px;
                padding: 0;
            }

            #oneRepMaxTestMenuDiv span {
                color: white;
                font-weight: bold;
                font-size: large;
                display: block;
            }

            #oneRepMaxTestMenuDiv div div {
                display: flex;
                justify-content: space-evenly;
            }

            #oneRepMaxTestMenuDiv a {
                color: white;
                font-weight: bold;
                cursor: pointer;
            }

            #mid_ruler {
                background-color: white;
                padding: 0.5px;
            }

            .calculatorExtraContentRoot {
                margin-top: 24px;
            }

            .calculatorExtraContentRoot input[type=submit] {
                margin: 48px auto;

                display: block;
                background-color: #5F36C4;
                color: white;
                border: none;
                font-size: large;
                border-radius: 32px;
                padding: 6px 64px;
                cursor: pointer;
            }

            .calculatorSubItemDiv {
                border: 3px solid #5F36C4;
                border-radius: 15px;
                padding: 8px;
                display: flex;
                margin-top: 12px;
            }

            .bodyPartVisualDiv {
                display: flex;
                height: 96px;
                flex: 0 0 96px;
                text-align: center;
                padding: 0;
                position: relative;
                justify-content: center;
                align-items: center;
            }

            .bodyPartHighlightCircle {
                display: block;
                width: 64px;
                height: 64px;
                border-radius: 32px;
                background-color: #E7DFF7;
            }

            .bodyPartInputsDiv {
                flex-grow: 1;
                padding: 12px;
            }

            .bodyPartInputsDiv input {
                width: 40px;
                text-align: center;
                -webkit-appearance: none;
                -moz-appearance: textfield;
                margin: 0 0 0 8px;
                border-bottom: none;
            }

            .bodyPartInputsDiv div {
                display: flex;
                justify-content: space-between;
            }

            .bodyPartInputsDiv label {
                margin-top: 12px;
                border-bottom: 1px solid #5F36C4;
            }

            ._1rmResultInfoDiv span {
                font-size: small;
            }

            ._1rmResultInfoDiv span:first-child {
                display: inline-block;
                width: 48px;
            }

            .resultSubItemDiv {
                display: flex;
                justify-content: space-between;
                align-items: center;
            }

            .resultSubItemDiv span:first-child {
                font-size: large;
            }

            .resultSubItemDiv span:last-child {
                font-size: xx-large;
            }

            #_1RMResultActionButtons {
                margin-top: 48px;
                margin-bottom: 32px;
                display: flex;
                justify-content: center;
            }

            #_1RMResultActionButtons div {
                width: 256px;
                text-align: center;
            }

            #_1RMResultActionButtons div div {
                display: flex;
            }

            #_1RMResultActionButtons div div a {
                flex-grow: 1;
            }

            .lightButton:not(.skip), .darkButton:not(.skip) {
                display: flex;
                justify-content: center;
                align-items: center;
            }

            .lightButton {
                border-radius: 24px;
                border: 2px solid #6633CC;
                color: #6633CC;
                padding: 3px 32px;
                text-align: center;
                margin-top: 12px;
                height: 40px;
                cursor: pointer;
                transition: 200ms;
            }

            .lightButton:hover {
                background-color: #E7DFF7;
                transition: 200ms;
            }

            .darkButton {
                border-radius: 24px;
                border: 2px solid #6633CC;
                background-color: #6633CC;
                color: white;
                padding: 6px 32px;
                text-align: center;
                margin-top: 12px;
                height: 40px;
                cursor: pointer;
                transition: 200ms;
            }

            .darkButton:hover {
                background-color: #E7DFF7;
                transition: 200ms;
            }
        }

        #calculatorsDiv input[type=number]:not(.skip), #calculatorsDiv input[type=submit]:not(.skip) {
            width: 100%;
        }

        #oneRepMaxCalculatorResultDetailed {
            width: 100%;
        }

        #plateBarbellRackingCalculatorContent {
            display: block;
        }

        .checked {
            background-color: #5F36C4;
            border-radius: 16px;
            border: 2px solid #5F36C4;
            color: white;
            padding: 4px 8px;
            margin: 4px;
            cursor: pointer;
        }

        .unchecked {
            background-color: white;
            border-radius: 16px;
            color: #5F36C4;
            border: 2px solid #5F36C4;
            padding: 4px 8px;
            margin: 4px;
            cursor: pointer;
        }

        #calculatorsDiv {
            background-color: white;
        }

        .calculatorContentRoot {
            border-radius: 12px;
            color: white;
            background-color: #5F36C4;
            box-shadow: -1px 2px 3px darkgray,
            1px 2px 3px darkgray;
        }

        input {
            background-color: inherit;
            color: inherit;
            border: none;
            border-bottom: 2px solid white;
            font-size: small;
            padding: 4px 8px;
        }

        input::placeholder { /* Chrome, Firefox, Opera, Safari 10.1+ */
            color: white;
            opacity: 1; /* Firefox */
        }

        input:-ms-input-placeholder { /* Internet Explorer 10-11 */
            color: white;
        }

        input::-ms-input-placeholder { /* Microsoft Edge */
            color: white;
        }

        #oneRepMaxCalculatorContent, #plateBarbellRackingCalculatorContent {
            flex-grow: 1;
            margin: 0;
            padding: 0;
        }

        #oneRepMaxCalculatorContent label, #plateBarbellRackingCalculatorContent label {
            font-weight: bold;
        }

        #liftMass {
            margin-bottom: 24px;
        }

        #calculatorsDiv input[type=submit]:not(.skip) {
            margin-top: 32px;
            display: block;
            background-color: white;
            font-size: large;
            font-weight: bold;
            color: #5F36C4;
            border: none;
            border-radius: 32px;
            padding: 4px;
            cursor: pointer;
        }

        #oneRepMaxCalculatorResult span:first-child {
            font-size: large;
            display: block;
            text-align: start;
        }

        #oneRepMaxCalculatorResult span:last-child {
            font-size: large;
            display: block;
            text-align: end;
        }

        #oneRepMaxCalculatorResult div {
            display: block;
            text-align: center;
        }

        #oneRepMaxCalculatorResult div span:first-child {
            display: inline-block;
            font-size: 50px;
            min-width: 64px;
            border-bottom: 2px solid white;
            text-align: center;
            min-height: 50px;
        }

        #oneRepMaxCalculatorResult div span:last-child {
            display: inline-block;
            font-size: x-large;
        }

        #oneRepMaxCalculatorResultDetailed tr:first-child {
            color: dimgray;
            font-weight: bold;
        }

        #calculatorInfoDiv {
            padding: 40px 24px;
        }

        #calculatorInfoDiv span {
            display: block;
        }

        #calculatorInfoDiv span:first-child {
            font-size: large;
            margin-bottom: 10px;
        }

        #radarChartRootDiv {
            display: flex;
            justify-content: center;
        }

        #radarChartDiv {
            display: flex;
            background-color: #F0F0F0;
            min-width: 400px;
            width: 400px;
            height: 400px;
            border-radius: 210px;
            align-items: center;
            justify-content: center;
        }

        #radarChartDiv canvas {
            width: 360px !important;
            height: 360px !important;
        }
    </style>

    <script>
        const ONE_REP_MAX_CONST = 0.025;
        let previousScores = [];
        let calculatorDivs;

        $(document).ready(function () {
            fetchOneRepMaxResults();

            calculatorDivs = [
                $('#oneRepMaxTestDiv'),
                $('#oneRepMaxResultDiv'),
                $('#gripStrengthTestDiv'),
                $('#twelveMinRunTestDiv'),
                $('#oneRepMaxDiv'),
                $('#plateBarbellRackingDiv'),
                $('#wilksDiv')
            ];

            $('#calculatorSwitchTabs input[type=radio]').change(function () {
                let p = $('#calculatorSwitchTabs input[type=radio]:checked').parent();
                p.removeClass('unchecked');
                p.addClass('checked');
                $.each($('#calculatorSwitchTabs input[type=radio]:not(:checked)'), (i, x) => x.parentElement.className = 'unchecked');

                let title = $('#calculatorInfoRootDiv span:first-child');
                let description = $('#calculatorInfoRootDiv span:last-child');
                $('#calculatorsDiv div:not(:first-child)').hide();
                switch (p.attr('id')) {
                    case 'oneRepMaxButton':
                        $('#oneRepMaxDiv').show();
                        $('#oneRepMaxDiv div').show();
                        title.html('One Rep Max Calculator');
                        description.html('This is the maximum weight that one person can lift per repetition.');
                        break;
                    case 'plateBarbelButton':
                        $('#plateBarbellRackingDiv').show();
                        $('#plateBarbellRackingDiv div').show();
                        title.html('Plate Barbell Calculator');
                        description.html('Compute combination of plates for a specific weight.');
                        break;
                    case 'wilksButton':
                        $('#wilksDiv').show();
                        $('#wilksDiv div').show();
                        title.html('Wilks Calculator');
                        description.html('Wilks Score helps compare the strength of powerlifters, taking into account body weight and gender.');
                        break;
                    default:
                        break;
                }
            });

            $('#oneRepMaxTestMenuButton').click(function () {
                $('#calculatorSwitchMenu').fadeOut(100);

                calculatorDivs.forEach(div => div.hide());
                $('#oneRepMaxTestDiv').show();

                $('#goBackMenuDiv').show();
                $('#calculatorsDiv').delay(100).fadeIn(100);
            });
            $('#oneRepMaxResultMenuButton').click(function () {
                $('#calculatorSwitchMenu').fadeOut(100);

                calculatorDivs.forEach(div => div.hide());
                $('#oneRepMaxResultDiv').show();

                $('#goBackMenuDiv').show();
                $('#calculatorsDiv').delay(100).fadeIn(100);
            });
            $('#gripStrengthTestMenuButton').click(function () {
                $('#calculatorSwitchMenu').fadeOut(100);

                calculatorDivs.forEach(div => div.hide());
                $('#gripStrengthTestDiv').show();

                $('#goBackMenuDiv').show();
                $('#calculatorsDiv').delay(100).fadeIn(100);
            });
            $('#twelveMinRunTestMenuButton').click(function () {
                $('#calculatorSwitchMenu').fadeOut(100);

                calculatorDivs.forEach(div => div.hide());
                $('#twelveMinRunTestDiv').show();

                $('#goBackMenuDiv').show();
                $('#calculatorsDiv').delay(100).fadeIn(100);
            });

            $('#oneRepMaxMenuButton').click(function () {
                $('#calculatorSwitchMenu').fadeOut(100);

                calculatorDivs.forEach(div => div.hide());
                $('#oneRepMaxDiv').show();
                $('#oneRepMaxDiv .calculatorDiv').show();

                $('#goBackMenuDiv').show();
                $('#calculatorsDiv').delay(100).fadeIn(100);
            });
            $('#plateBarbelMenuButton').click(function () {
                $('#calculatorSwitchMenu').fadeOut(100);

                calculatorDivs.forEach(div => div.hide());
                $('#plateBarbellRackingDiv').show();
                $('#plateBarbellRackingDiv .calculatorDiv').show();

                $('#goBackMenuDiv').show();
                $('#calculatorsDiv').delay(100).fadeIn(100);
            });
            $('#wilksMenuButton').click(function () {
                $('#calculatorSwitchMenu').fadeOut(100);

                calculatorDivs.forEach(div => div.hide());
                $('#wilksDiv').show();
                $('#wilksDiv .calculatorDiv').show();

                $('#goBackMenuDiv').show();
                $('#calculatorsDiv').delay(100).fadeIn(100);
            });
            $('#goBackMenuButton').click(function () {
                $('#goBackMenuDiv').hide();
                $('#calculatorsDiv').hide();
                $('#calculatorSwitchMenu').fadeIn(100);
            });

            $('#oneRepMaxCalculatorContent input[type=submit]').click(function () {
                let liftMass = parseFloat($('#liftMass').val());
                let repetitions = parseInt($('#repetitions').val());

                if (!isNaN(liftMass) && !isNaN(repetitions)) {
                    let oneRepMax = Math.trunc((liftMass + liftMass * repetitions * ONE_REP_MAX_CONST) * 10) / 10;
                    $('#oneRepMaxResult').html(oneRepMax.toString());

                    $("#oneRepMaxCalculatorResultDetailed tr:not(:first-child)").empty();
                    [0.01, 0.02, 0.04, 0.06, 0.08, 0.1, 0.12, 0.16, 0.2, 0.24, 0.3].forEach((v, i) => {
                        let percentage = 1 - i * 0.05;
                        $('#oneRepMaxCalculatorResultDetailed tr:last').after(`<tr><td>${Math.trunc(percentage * 100)}</td><td>${Math.trunc(oneRepMax * percentage * 10) / 10} KG</td><td>${Math.trunc(v * 100)}</td></tr>`);
                        console.log($('#oneRepMaxCalculatorResultDetailed tr'));
                    });
                    $('#oneRepMaxCalculatorResultDetailed').show();
                }
            });
            $('#plateBarbellRackingCalculatorContent input[type=submit]').click(function () {
                let div = $('#plateBarbellRackingCalculatorResult');
                div.empty();
                let totalLiftMass = parseFloat($('#totalLiftMass').val());
                let barWeight = parseInt($('#barWeight').val());
                totalLiftMass -= barWeight;

                let plates = [];
                if (!isNaN(totalLiftMass) && !isNaN(barWeight)) {
                    [25, 20, 15, 10, 5, 2.5, 1.25].forEach((w, _) => {
                        if (totalLiftMass <= 0)
                            return;
                        let count = Math.trunc(totalLiftMass / w);
                        count -= count % 2 === 1 ? 1 : 0;
                        if (count > 0) {
                            plates.push(`${w}KG × ${count}`);
                            totalLiftMass -= count * w;
                        }
                    });
                    console.log(plates);
                    if (totalLiftMass === 0)
                        plates.forEach((plate) => div.append(`<a class="liftPlates">${plate}</a>`));
                    else
                        alert('Failed to compute, please try different weight!');
                } else
                    alert('Failed to compute, please try different weight!');
            });
            $('#wilksCalculatorContent input[type=submit]').click(function () {
                let gender = $('#wilksCalculatorContent input[type=radio][name=gender]:checked').val();
                let bodyWeight = parseFloat($('#bodyWeight').val());
                let benchLiftMass = parseFloat($('#benchLiftMass').val());
                let benchRepetitions = parseInt($('#benchRepetitions').val());
                let squatMass = parseFloat($('#squatMass').val());
                let squatRepetitions = parseInt($('#squatRepetitions').val());
                let deadliftMass = parseFloat($('#deadliftMass').val());
                let deadliftRepetitions = parseInt($('#deadliftRepetitions').val());

                if ((gender === 'male' || gender === 'female') && !isNaN(bodyWeight) && !isNaN(benchLiftMass) && !isNaN(benchRepetitions) && !isNaN(squatMass) && !isNaN(squatRepetitions) && !isNaN(deadliftMass) && !isNaN(deadliftRepetitions)) {
                    let calc1rm = (mass, reps) => mass + mass * reps * 0.025;
                    let bench1rm = calc1rm(benchLiftMass, benchRepetitions);
                    let squat1rm = calc1rm(squatMass, squatRepetitions);
                    let deadLift1rm = calc1rm(deadliftMass, deadliftRepetitions);
                    let totalLiftMass = bench1rm + squat1rm + deadLift1rm;
                    let coefficients;
                    if (gender === 'male')
                        coefficients = [-216.0475144, 16.2606339, -0.002388645, -0.00113732, 7.01863E-06, -1.291E-08];
                    else if (gender === 'female')
                        coefficients = [594.31747775582, -27.23842536447, 0.82112226871, -0.00930733913, 4.731582E-05, -9.054E-08];
                    if (coefficients != null) {
                        let denominator = 0;
                        for (let i = 0; i < coefficients.length; i++)
                            denominator += coefficients[i] * Math.pow(bodyWeight, i);
                        let wilksScore = totalLiftMass * 500 / denominator;
                        $('#wilksScoreResult').html(Math.trunc(wilksScore * 100) / 100);
                    }
                } else
                    alert('Failed to compute, please try different values!');
            });

            $('#oneRepMaxTestDiv input[type=submit]').click(function () {
                // essential info
                let name = $('#oneRepMaxTestDiv input[name="name"]').val();
                let gender = $('#oneRepMaxTestDiv input[name="oneRmGender"]:checked').val();
                let age = $('#oneRepMaxTestDiv input[name="age"]').val();
                let height = $('#oneRepMaxTestDiv input[name="height"]').val();
                let weight = $('#oneRepMaxTestDiv input[name="weight"]').val();
                // shoulder
                let shoulderWeight = $('#oneRepMaxTestDiv input[name="shoulderWeight"]').val();
                let shoulderCount = $('#oneRepMaxTestDiv input[name="shoulderCount"]').val();
                let shoulder = Math.trunc((shoulderWeight + shoulderWeight * shoulderCount * ONE_REP_MAX_CONST) * 10) / 10;
                // chest
                let chestWeight = $('#oneRepMaxTestDiv input[name="chestWeight"]').val();
                let chestCount = $('#oneRepMaxTestDiv input[name="chestCount"]').val();
                let chest = Math.trunc((chestWeight + chestWeight * chestCount * ONE_REP_MAX_CONST) * 10) / 10;
                // back
                let backWeight = $('#oneRepMaxTestDiv input[name="backWeight"]').val();
                let backCount = $('#oneRepMaxTestDiv input[name="backCount"]').val();
                let back = Math.trunc((backWeight + backWeight * backCount * ONE_REP_MAX_CONST) * 10) / 10;
                // abs
                let absWeight = $('#oneRepMaxTestDiv input[name="absWeight"]').val();
                let absCount = $('#oneRepMaxTestDiv input[name="absCount"]').val();
                let abs = Math.trunc((absWeight + absWeight * absCount * ONE_REP_MAX_CONST) * 10) / 10;
                // legs
                let legsWeight = $('#oneRepMaxTestDiv input[name="legsWeight"]').val();
                let legsCount = $('#oneRepMaxTestDiv input[name="legsCount"]').val();
                let legs = Math.trunc((legsWeight + legsWeight * legsCount * ONE_REP_MAX_CONST) * 10) / 10;

                let loadPrevious = false;
                [name, gender, age, height, weight].forEach(x => loadPrevious |= x.toString().length === 0);
                if (loadPrevious && previousScores.length > 0) {
                    $.post('/api/insert_1rm_result', {sessionKey: "{{ sessionKey }}", name: previousScores[0].name, gender: previousScores[0].gender, age: previousScores[0].age, height: previousScores[0].height, weight: previousScores[0].weight, shoulder: shoulder, chest: chest, back: back, abs: abs, legs: legs}, function (res) {
                        if (res.success) {
                            console.log('one rep max result inserted');
                            fetchOneRepMaxResults();
                        } else
                            alert('Failed to save the result, please try again later!');
                    });
                } else {
                    showPersonalInfo(name, gender, age, height, weight);
                    $.post('/api/insert_1rm_result', {sessionKey: "{{ sessionKey }}", name: name, gender: gender, age: age, height: height, weight: weight, shoulder: shoulder, chest: chest, back: back, abs: abs, legs: legs}, function (res) {
                        if (res.success)
                            console.log('one rep max result inserted');
                        else
                            alert('Failed to save the result, please try again later!');
                    });
                }
            });

            $('#printButton').click(function () {
                print(); // todo do better
            });
            $('#photoCardButton').click(function () {

            });
            $('#uploadButton').click(function () {

            });
            $('#returnButton').click(function () {
                $('#goBackMenuButton').click();
            });
        });

        function fetchOneRepMaxResults() {
            previousScores = [];
            $.post('/api/fetch_1rm_results', {sessionKey: "{{ sessionKey }}"}, function (res) {
                if (res.success) {
                    if (res.name === '' || res.gender === '' || res.age === -1 || res.height === -1 || res.weight === -1) {
                        $('#oneRepMaxTestDiv input:not([type=submit])').attr('required', 'true');
                        alert('You have no previous entries, please fill out the form completely!');
                    } else {
                        if (res.name != null) {
                            $('#oneRepMaxTestDiv input[name="name"]').val(res.name);
                            $(`#oneRepMaxTestDiv input[name="oneRmGender"][value="${res.gender}"]`).prop('checked', true);
                            $('#oneRepMaxTestDiv input[name="age"]').val(res.age);
                            $('#oneRepMaxTestDiv input[name="height"]').val(res.height);
                            $('#oneRepMaxTestDiv input[name="weight"]').val(res.weight);

                            for (let i = 0; i < res.scores.length; i++)
                                previousScores.push({
                                    timestamp: res.scores[i].timestamp,
                                    shoulder: res.scores[i].shoulder,
                                    chest: res.scores[i].chest,
                                    back: res.scores[i].back,
                                    abs: res.scores[i].abs,
                                    legs: res.scores[i].legs,
                                });

                            showPersonalInfo(res.name, res.gender, res.age, res.height, res.weight);
                            showCharts(res.scores);
                        }
                    }
                } else
                    alert('Failed to load previous one rep max test results!');
            });
        }

        function showPersonalInfo(name, gender, age, height, weight) {
            // set values on ui
            $('._1rmResultName').html(name);
            $('#_1rmResultGender').html(gender);
            $('#_1rmResultAge').html(age);
            $('#_1rmResultHeight').html(height);
            $('#_1rmResultWeight').html(weight);
        }

        function showCharts(scores) {
            if (scores.length === 0) {
                // todo clear charts
                $('#goBackMenuButton').click();
                return;
            }

            // radar chart
            let shoulder = Math.trunc(scores[0].shoulder);
            let chest = Math.trunc(scores[0].chest);
            let back = Math.trunc(scores[0].back);
            let abs = Math.trunc(scores[0].abs);
            let legs = Math.trunc(scores[0].legs);

            new Chart(document.getElementById('radarChart'), {
                type: 'radar',
                data: {
                    labels: [['Shoulder', `(${shoulder} del)`], ['Chest', `(${chest} del)`], ['Back', `(${back} del)`], ['Abs', `(${abs} del)`], ['Legs', `(${legs} del)`]],
                    datasets: [{
                        data: [shoulder, chest, back, abs, legs],
                        backgroundColor: '#A97DFF61',
                        borderColor: '#A67BFF',
                        borderWidth: 5,
                        pointerEnabled: false
                    }]
                },
                options: {
                    responsive: false,
                    maintainAspectRatio: false,
                    aspectRatio: 1,
                    scale: {
                        ticks: {min: 0, display: false},
                        pointLabels: {fontColor: 'black', fontSize: 15},
                        gridLines: {
                            lineWidth: 1.5,
                            color: "#AAAAAA"
                        },
                    },
                    elements: {point: {radius: 0}},
                    legend: {display: false},
                    layout: {padding: 20}
                }
            });
            $('#radarChartRootDiv').show();

            $('#_1rmResultAvgScore').html((shoulder + chest + back + abs + legs) / 5);
            $('#_1rmResultTotalScore').html(shoulder + chest + back + abs + legs);

            $('#shoulderResult').html(`${shoulder}del`);
            $('#chestResult').html(`${chest}del`);
            $('#backResult').html(`${back}del`);
            $('#absResult').html(`${abs}del`);
            $('#legsResult').html(`${legs}del`);

            // bar chart
            let max = 0;
            let totalScores = Array(4).fill(0);
            let dates = Array(4).fill("...");
            let i;
            for (i = 0; i < scores.length; i++) {
                totalScores.splice(4 - i, 1, scores[i].shoulder + scores[i].chest + scores[i].back + scores[i].abs + scores[i].legs);
                let date = new Date(scores[i].timestamp);
                dates.splice(4 - i, 1, [date.getFullYear().toString(), `${padZero(date.getMonth(), 2)}${padZero(date.getDate(), 2)}`]);
                max = Math.max(max, totalScores[4 - i]);
            }

            Chart.helpers.drawRoundedTopRectangle = function (ctx, x, y, width, height, radius) {
                ctx.beginPath();
                ctx.moveTo(x + radius, y);
                // top right corner
                ctx.lineTo(x + width - radius, y);
                ctx.quadraticCurveTo(x + width, y, x + width, y + radius);
                // bottom right   corner
                ctx.lineTo(x + width, y + height);
                // bottom left corner
                ctx.lineTo(x, y + height);
                // top left
                ctx.lineTo(x, y + radius);
                ctx.quadraticCurveTo(x, y, x + radius, y);
                ctx.closePath();
            };
            Chart.elements.RoundedTopRectangle = Chart.elements.Rectangle.extend({
                draw: function () {
                    var ctx = this._chart.ctx;
                    var vm = this._view;
                    var left, right, top, bottom, signX, signY, borderSkipped;
                    var borderWidth = vm.borderWidth;

                    if (!vm.horizontal) {
                        // bar
                        left = vm.x - vm.width / 2;
                        right = vm.x + vm.width / 2;
                        top = vm.y;
                        bottom = vm.base;
                        signX = 1;
                        signY = bottom > top ? 1 : -1;
                        borderSkipped = vm.borderSkipped || 'bottom';
                    } else {
                        // horizontal bar
                        left = vm.base;
                        right = vm.x;
                        top = vm.y - vm.height / 2;
                        bottom = vm.y + vm.height / 2;
                        signX = right > left ? 1 : -1;
                        signY = 1;
                        borderSkipped = vm.borderSkipped || 'left';
                    }

                    // Canvas doesn't allow us to stroke inside the width so we can
                    // adjust the sizes to fit if we're setting a stroke on the line
                    if (borderWidth) {
                        // borderWidth shold be less than bar width and bar height.
                        var barSize = Math.min(Math.abs(left - right), Math.abs(top - bottom));
                        borderWidth = borderWidth > barSize ? barSize : borderWidth;
                        var halfStroke = borderWidth / 2;
                        // Adjust borderWidth when bar top position is near vm.base(zero).
                        var borderLeft = left + (borderSkipped !== 'left' ? halfStroke * signX : 0);
                        var borderRight = right + (borderSkipped !== 'right' ? -halfStroke * signX : 0);
                        var borderTop = top + (borderSkipped !== 'top' ? halfStroke * signY : 0);
                        var borderBottom = bottom + (borderSkipped !== 'bottom' ? -halfStroke * signY : 0);
                        // not become a vertical line?
                        if (borderLeft !== borderRight) {
                            top = borderTop;
                            bottom = borderBottom;
                        }
                        // not become a horizontal line?
                        if (borderTop !== borderBottom) {
                            left = borderLeft;
                            right = borderRight;
                        }
                    }

                    // calculate the bar width and roundess
                    const barWidth = Math.abs(left - right);
                    const roundness = this._chart.config.options.barRoundness || 0.5;
                    const radius = barWidth * roundness * 0.5;

                    // keep track of the original top of the bar
                    const prevTop = top;

                    // move the top down so there is room to draw the rounded top
                    top = prevTop + radius;
                    const barRadius = top - prevTop;

                    ctx.beginPath();
                    ctx.fillStyle = vm.backgroundColor;
                    ctx.strokeStyle = vm.borderColor;
                    ctx.lineWidth = borderWidth;

                    // draw the rounded top rectangle
                    Chart.helpers.drawRoundedTopRectangle(ctx, left, (top - barRadius + 1), barWidth, bottom - prevTop, barRadius);

                    ctx.fill();
                    if (borderWidth) {
                        ctx.stroke();
                    }

                    // restore the original top value so tooltips and scales still work
                    top = prevTop;
                },
            });
            Chart.defaults.roundedBar = Chart.helpers.clone(Chart.defaults.bar);
            Chart.controllers.roundedBar = Chart.controllers.bar.extend({dataElementType: Chart.elements.RoundedTopRectangle});
            new Chart(document.getElementById('barChart'), {
                type: 'roundedBar',
                data: {
                    labels: dates,
                    datasets: [{
                        backgroundColor: ["#E7DFF7", "#E7DFF7", "#E7DFF7", "#E7DFF7", "#6633CC"],
                        data: totalScores
                    }]
                },
                options: {
                    legend: {display: false},
                    barRoundness: 0.7,
                    scales: {
                        xAxes: [{
                            gridLines: {color: "white"},
                            barPercentage: 0.5
                        }],
                        yAxes: [{
                            ticks: {min: 1, stepSize: Math.trunc(max / 4)},
                            gridLines: {borderDash: [8, 4], color: "lightgray", drawBorder: false}
                        }]
                    },
                    plugins: {
                        datalabels: {
                            formatter: (value, ctx) => {
                                return value !== 0 ? value.toLocaleString(/* ... */) : 'N/A'
                            },
                            anchor: 'end',
                            align: 'end',
                            color: '#888'
                        }
                    }
                }
            });
        }

        function hideExerciseSelectorDivClick() {
            selectExerciseDiv.style.display = 'none';
        }

        function padZero(num, size) {
            num = num.toString();
            while (num.length < size) num = "0" + num;
            return num;
        }
    </script>
{% endblock %}
